<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>PixiCam – Magic Mirror</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <header class="topbar">
    <div class="logo">PixiCam</div>
    <nav class="nav">
      <button onclick="location.href='home.html'">Home</button>
      <button class="active" onclick="location.href='interface.html'">Interface</button>
      <button onclick="location.href='gallery.html'">Gallery</button>
    </nav>
  </header>

  <main class="mirror-container">

    <div id="loading-overlay"
      style="position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); color:white; display:flex; justify-content:center; align-items:center; z-index:9999; transition: opacity 0.5s;">
      Loading Camera...
    </div>

    <div class="mirror-frame glass">
      <div id="indicator" class="record-indicator">● RECORDING</div>

      <!-- Raw video source (hidden but active for OpenCV) -->
      <video id="video" autoplay playsinline muted class="hidden-source"></video>

      <!-- Output canvas (visible display) -->
      <canvas id="output-canvas"></canvas>

      <div class="filter-controls" style="margin-top: 15px; display: flex; justify-content: center; gap: 10px;">
        <button class="filter-btn active" data-filter="none">Normal</button>
        <button class="filter-btn" data-filter="edge">Edge</button>
        <button class="filter-btn" data-filter="cartoon">Cartoon</button>
      </div>

      <div class="mirror-controls">
        <button id="capture-btn"> Capture </button>
      </div>
    </div>

    <!-- Post-Capture Preview Modal -->
    <div id="capture-modal" hidden>
      <div class="modal-content glass">
        <button id="modal-close" class="modal-close-btn">&times;</button>
        <h3>Capture Preview</h3>
        <img id="preview-image" src="" alt="Captured Photo">
        <div class="modal-actions">
          <button id="modal-download" class="primary-btn">Download</button>
          <button id="modal-delete" class="danger-btn">Delete</button>
        </div>
      </div>
    </div>

  </main>

  <script src="app.js"></script>
  <script async src="https://docs.opencv.org/4.8.0/opencv.js" onload="onOpenCvReady()" type="text/javascript"></script>

</body>

</html>